<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CRM</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="app">
        
        <!-- ==================== –®–ê–ü–ö–ê ==================== -->
        <header class="header">
            <div class="header-left">
                <span class="logo">üìã</span>
                <span class="title" id="page-title">–ú–æ—è CRM</span>
            </div>
            <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
        </header>

        <!-- ==================== –°–¢–†–ê–ù–ò–¶–ê: –ì–õ–ê–í–ù–ê–Ø ==================== -->
        <div class="page active" id="page-home">
            
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-card">
                <div class="stats-header">
                    <span class="greeting" id="greeting">üëã –ü—Ä–∏–≤–µ—Ç!</span>
                    <span class="stats-date" id="current-date"></span>
                </div>
                <div class="stats-row">
                    <div class="stat">
                        <span class="stat-icon">‚úÖ</span>
                        <span class="stat-value" id="stat-done">0</span>
                        <span class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                    </div>
                    <div class="stat">
                        <span class="stat-icon">üìã</span>
                        <span class="stat-value" id="stat-total">0</span>
                        <span class="stat-label">–í—Å–µ–≥–æ</span>
                    </div>
                    <div class="stat">
                        <span class="stat-icon">üéØ</span>
                        <span class="stat-value" id="stat-percent">0%</span>
                        <span class="stat-label">–ü—Ä–æ–≥—Ä–µ—Å—Å</span>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>

            <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
            <div class="quick-actions">
                <button class="quick-action" onclick="showAddTask()">
                    <span class="quick-icon">‚ûï</span>
                    <span>–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</span>
                </button>
                <button class="quick-action" onclick="switchPage('calendar')">
                    <span class="quick-icon">üìÖ</span>
                    <span>–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span>
                </button>
            </div>

            <!-- –°–µ–≥–æ–¥–Ω—è—à–Ω–∏–µ –∑–∞–¥–∞—á–∏ -->
            <div class="section">
                <div class="section-header">
                    <h2>üî• –°–µ–≥–æ–¥–Ω—è</h2>
                    <span class="section-count" id="today-count">0</span>
                </div>
                <div class="task-list" id="today-tasks">
                    <div class="empty-state">
                        <span class="empty-icon">üéâ</span>
                        <span>–ù–∞ —Å–µ–≥–æ–¥–Ω—è –∑–∞–¥–∞—á –Ω–µ—Ç!</span>
                    </div>
                </div>
            </div>

            <!-- –°—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ -->
            <div class="section">
                <div class="section-header">
                    <h2>üî¥ –°—Ä–æ—á–Ω—ã–µ</h2>
                    <span class="section-count" id="urgent-count">0</span>
                </div>
                <div class="task-list" id="urgent-tasks"></div>
            </div>

        </div>

        <!-- ==================== –°–¢–†–ê–ù–ò–¶–ê: –ó–ê–î–ê–ß–ò ==================== -->
        <div class="page" id="page-tasks">
            
            <!-- –¢–∞–±—ã -->
            <div class="tabs">
                <button class="tab active" data-view="board">üìä –î–æ—Å–∫–∞</button>
                <button class="tab" data-view="list">üìã –°–ø–∏—Å–æ–∫</button>
            </div>

            <!-- –î–æ—Å–∫–∞ (–ö–∞–Ω–±–∞–Ω) -->
            <div class="view active" id="view-board">
                <div class="board" id="board"></div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ -->
            <div class="view" id="view-list">
                <div class="filters">
                    <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
                    <button class="filter-btn" data-filter="todo">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
                    <button class="filter-btn" data-filter="done">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</button>
                </div>
                <div class="task-list" id="task-list"></div>
            </div>

        </div>

        <!-- ==================== –°–¢–†–ê–ù–ò–¶–ê: –ö–ê–õ–ï–ù–î–ê–†–¨ ==================== -->
        <div class="page" id="page-calendar">
            
            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º -->
            <div class="calendar-nav">
                <button class="cal-nav-btn" onclick="prevMonth()">‚óÄ</button>
                <span class="cal-month" id="cal-month">–î–µ–∫–∞–±—Ä—å 2024</span>
                <button class="cal-nav-btn" onclick="nextMonth()">‚ñ∂</button>
            </div>

            <!-- –î–Ω–∏ –Ω–µ–¥–µ–ª–∏ -->
            <div class="calendar-weekdays">
                <span>–ü–Ω</span>
                <span>–í—Ç</span>
                <span>–°—Ä</span>
                <span>–ß—Ç</span>
                <span>–ü—Ç</span>
                <span>–°–±</span>
                <span>–í—Å</span>
            </div>

            <!-- –°–µ—Ç–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è -->
            <div class="calendar-grid" id="calendar-grid"></div>

            <!-- –ó–∞–¥–∞—á–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –¥–Ω—è -->
            <div class="calendar-tasks">
                <div class="section-header">
                    <h2 id="selected-date-title">üìÖ –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–Ω—å</h2>
                </div>
                <div class="task-list" id="calendar-task-list">
                    <div class="empty-state">
                        <span class="empty-icon">üìÖ</span>
                        <span>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –¥–µ–Ω—å</span>
                    </div>
                </div>
            </div>

        </div>

        <!-- ==================== –°–¢–†–ê–ù–ò–¶–ê: –ü–†–û–§–ò–õ–¨ ==================== -->
        <div class="page" id="page-profile">
            
            <!-- –ê–≤–∞—Ç–∞—Ä –∏ –∏–º—è -->
            <div class="profile-header">
                <div class="profile-avatar" id="profile-avatar">üë§</div>
                <div class="profile-name" id="profile-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                <div class="profile-username" id="profile-username">@username</div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
            <div class="profile-stats">
                <div class="profile-stat">
                    <span class="profile-stat-value" id="profile-total">0</span>
                    <span class="profile-stat-label">–í—Å–µ–≥–æ –∑–∞–¥–∞—á</span>
                </div>
                <div class="profile-stat">
                    <span class="profile-stat-value" id="profile-done">0</span>
                    <span class="profile-stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                </div>
                <div class="profile-stat">
                    <span class="profile-stat-value" id="profile-streak">0</span>
                    <span class="profile-stat-label">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</span>
                </div>
            </div>

            <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
            <div class="section">
                <div class="section-header">
                    <h2>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
                </div>
                <div class="achievements" id="achievements">
                    <div class="achievement locked">
                        <span class="achievement-icon">üåü</span>
                        <span class="achievement-name">–ü–µ—Ä–≤–∞—è –∑–∞–¥–∞—á–∞</span>
                    </div>
                    <div class="achievement locked">
                        <span class="achievement-icon">üî•</span>
                        <span class="achievement-name">5 –∑–∞–¥–∞—á –∑–∞ –¥–µ–Ω—å</span>
                    </div>
                    <div class="achievement locked">
                        <span class="achievement-icon">üí™</span>
                        <span class="achievement-name">10 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                    </div>
                    <div class="achievement locked">
                        <span class="achievement-icon">üöÄ</span>
                        <span class="achievement-name">50 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                    </div>
                    <div class="achievement locked">
                        <span class="achievement-icon">üëë</span>
                        <span class="achievement-name">100 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                    </div>
                    <div class="achievement locked">
                        <span class="achievement-icon">üìÖ</span>
                        <span class="achievement-name">7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</span>
                    </div>
                </div>
            </div>

            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div class="section">
                <div class="section-header">
                    <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                </div>
                <div class="settings-list">
                    <div class="settings-item" onclick="toggleTheme()">
                        <span>üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞</span>
                        <div class="toggle" id="theme-toggle-btn"></div>
                    </div>
                    <div class="settings-item">
                        <span>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                        <div class="toggle active"></div>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ -->
            <div class="section">
                <div class="section-header">
                    <h2>üìÇ –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞</h2>
                </div>
                <div class="workspaces-list" id="workspaces-list"></div>
            </div>

        </div>

        <!-- ==================== –ö–ù–û–ü–ö–ê FAB ==================== -->
        <button class="fab" onclick="showAddTask()">‚ûï</button>

        <!-- ==================== –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ ==================== -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-page="home" onclick="switchPage('home')">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
            </button>
            <button class="nav-btn" data-page="tasks" onclick="switchPage('tasks')">
                <span class="nav-icon">üìã</span>
                <span class="nav-label">–ó–∞–¥–∞—á–∏</span>
            </button>
            <button class="nav-btn" data-page="calendar" onclick="switchPage('calendar')">
                <span class="nav-icon">üìÖ</span>
                <span class="nav-label">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span>
            </button>
            <button class="nav-btn" data-page="profile" onclick="switchPage('profile')">
                <span class="nav-icon">üë§</span>
                <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </button>
        </nav>

    </div>

    <!-- ==================== –ú–û–î–ê–õ–ö–ê: –î–û–ë–ê–í–õ–ï–ù–ò–ï / –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï ==================== -->
    <div class="modal" id="modal-add">
        <div class="modal-overlay" onclick="closeModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-add-title">‚ûï –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h3>
                <button class="modal-close" onclick="closeModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="task-title" placeholder="–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?" class="input">
                </div>
                <div class="input-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="task-desc" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" class="input textarea"></textarea>
                </div>
                <div class="input-group">
                    <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                    <div class="priority-buttons">
                        <button type="button" class="priority-btn" data-priority="low">
                            <span>üü¢</span>
                            <span>–ù–∏–∑–∫–∏–π</span>
                        </button>
                        <button type="button" class="priority-btn selected" data-priority="medium">
                            <span>üü°</span>
                            <span>–°—Ä–µ–¥–Ω–∏–π</span>
                        </button>
                        <button type="button" class="priority-btn" data-priority="high">
                            <span>üî¥</span>
                            <span>–í—ã—Å–æ–∫–∏–π</span>
                        </button>
                    </div>
                </div>
                <div class="input-row">
                    <div class="input-group">
                        <label>üìÖ –î–∞—Ç–∞</label>
                        <input type="date" id="task-due-date" class="input">
                    </div>
                    <div class="input-group">
                        <label>‚è∞ –í—Ä–µ–º—è</label>
                        <input type="time" id="task-due-time" class="input">
                    </div>
                </div>
                <div class="input-group">
                    <label>üë§ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</label>
                    <input type="text" id="task-assignee" placeholder="@username" class="input">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" id="modal-add-btn" onclick="saveTask()">‚ú® –°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- ==================== –ú–û–î–ê–õ–ö–ê: –ü–†–û–°–ú–û–¢–† –ó–ê–î–ê–ß–ò ==================== -->
    <div class="modal" id="modal-task">
        <div class="modal-overlay" onclick="closeModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-task-priority" id="modal-priority"></div>
                <h3 id="view-task-title">–ó–∞–¥–∞—á–∞</h3>
                <button class="modal-close" onclick="closeModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="task-detail">
                    <span class="task-detail-label">üìù –û–ø–∏—Å–∞–Ω–∏–µ</span>
                    <p id="view-task-desc" class="task-description">–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è</p>
                </div>
                <div class="task-details-row">
                    <div class="task-detail">
                        <span class="task-detail-label">üìä –°—Ç–∞—Ç—É—Å</span>
                        <span id="view-task-status" class="task-status"></span>
                    </div>
                    <div class="task-detail">
                        <span class="task-detail-label">üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</span>
                        <span id="view-task-priority-text"></span>
                    </div>
                </div>
                <div class="task-details-row">
                    <div class="task-detail">
                        <span class="task-detail-label">üìÖ –î–µ–¥–ª–∞–π–Ω</span>
                        <span id="view-task-due">–ù–µ —É–∫–∞–∑–∞–Ω</span>
                    </div>
                    <div class="task-detail">
                        <span class="task-detail-label">üë§ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</span>
                        <span id="view-task-assignee">–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω</span>
                    </div>
                </div>
                <div class="task-detail">
                    <span class="task-detail-label">üìÖ –°–æ–∑–¥–∞–Ω–∞</span>
                    <span id="view-task-date"></span>
                </div>
            </div>
            <div class="modal-actions">
                <button class="action-btn" onclick="toggleCurrentTask()">
                    <span>‚úÖ</span>
                    <span id="toggle-btn-text">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                </button>
                <button class="action-btn" onclick="editCurrentTask()">
                    <span>‚úèÔ∏è</span>
                    <span>–ò–∑–º–µ–Ω–∏—Ç—å</span>
                </button>
                <button class="action-btn danger" onclick="deleteCurrentTask()">
                    <span>üóë</span>
                    <span>–£–¥–∞–ª–∏—Ç—å</span>
                </button>
            </div>
        </div>
    </div>

    <!-- ==================== –ú–û–î–ê–õ–ö–ê: –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –£–î–ê–õ–ï–ù–ò–Ø ==================== -->
    <div class="modal" id="modal-delete">
        <div class="modal-overlay" onclick="closeModal()"></div>
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>üóë –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É?</h3>
                <button class="modal-close" onclick="closeModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <p class="delete-warning">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É:</p>
                <p class="delete-task-name" id="delete-task-title">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</p>
                <p class="delete-note">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-danger" onclick="confirmDelete()">üóë –£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- ==================== –£–í–ï–î–û–ú–õ–ï–ù–ò–ï ==================== -->
    <div class="toast" id="toast">
        <span class="toast-icon">‚úÖ</span>
        <span class="toast-text">–ì–æ—Ç–æ–≤–æ!</span>
    </div>

    <script src="app.js"></script>
</body>
</html>
